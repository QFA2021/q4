{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Menu.vue?bb6c","webpack:///./src/components/GameBoard.vue?f510","webpack:///./src/assets/screenshot_board_4_super_color.png","webpack:///./src/App.vue?1003","webpack:///./src/components/Game.vue?7f02","webpack:///./src/assets/NeinNeinNein_large.webm","webpack:///./src/assets/screenshot_board_2_super_pos_tooltip.png","webpack:///./src/assets/Title.svg","webpack:///./src/assets/screenshot_board_5_super_color_collapsed.png","webpack:///./src/components/Alert.vue?19bd","webpack:///./src/App.vue?22c0","webpack:///./src/components/Alert.vue?1af5","webpack:///./src/components/Alert.vue","webpack:///./src/components/Alert.vue?eb3c","webpack:///./src/components/Game.vue?c1c3","webpack:///./src/components/GameBoard.vue?c0fe","webpack:///./src/ClassicGame.ts","webpack:///./src/GameVisual.ts","webpack:///./src/GameLogic.ts","webpack:///./src/components/GameBoard.vue","webpack:///./src/components/GameBoard.vue?83d7","webpack:///./src/components/GameExplanation.vue?766d","webpack:///./src/components/GameExplanation.vue","webpack:///./src/components/GameExplanation.vue?fa19","webpack:///./src/components/Game.vue","webpack:///./src/components/Game.vue?a8de","webpack:///./src/components/Menu.vue?7ff3","webpack:///./src/components/Menu.vue","webpack:///./src/components/Menu.vue?dde4","webpack:///./src/GameState.ts","webpack:///./src/GameStorage.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?97f5","webpack:///./src/main.ts","webpack:///./src/assets/NeinNeinNein_small.webm","webpack:///./src/assets/screenshot_board_1_super_pos.png","webpack:///./src/components/GameExplanation.vue?2109","webpack:///./src/assets/screenshot_board_3_super_pos_collapsed.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_hoisted_1","render","_ctx","_cache","$props","$setup","$data","$options","_component_Menu","_component_Game","_component_Alert","inMenu","onStartGame","startGame","onBackGame","backGame","state","onToMenu","$event","copyright","stateStack","onClick","undo","title","ref","default","reloadNow","$refs","offer","showModal","_","class","_hoisted_2","_hoisted_3","_hoisted_4","src","height","width","alt","_hoisted_5","onAfterEnter","afterFadeIn","onBeforeLeave","beforeFadeOut","clickBackground","$slots","message","event","this","showDone","target","currentTarget","keyboardEL","document","addEventListener","removeEventListener","undefined","props","String","shouldOpen","Boolean","watch","__exports__","type","media","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_component_GameBoard","_component_GameExplanation","$emit","player1","next_player","getCurrentPlayerColor","expl","open","onPlaceClassical","placeClassical","onPlaceSpace","placeSpace","onPlaceColor","placeColor","onManualCollapse","manualCollapse","collapsesBeforeMove","Infinity","outOfMoves","playerAllowedCollapses","low","playerDoubleAllowedClassical","style","autoplay","preload","video","play","winner","collapsingIsMove","mayCollapse","column","colorPiece","preparedColumn","prepare","row","set","col","occupancyCache","empty","piece","id","appear","small","stable","colorPieceOther","colorID","highlight","color","highlightOccupancy","has","highlightColor","winning","pieces","collapse","onMouseover","onMouseleave","getPieceActionHint","getActionPieceDebug","insertPiece","world","WIN_LENGTH","computeWinner","onlyStable","checkWinnerDirection","winnerTop","winnerBottom","rowD","columnD","count","nextPlayer1","Set","add","playerToColor","player_red","computeWorldOccupation","res","piecePos","Map","worlds","pos","computeWorldOccupationFilter","targetColumn","targetRow","targetPiece","nextPiece","next_stone_id","isSuperposColorPiece","isFullySetSuperposColorPiece","insertClassicPiece","playerIndex","internalPieceInsert","newWorlds","filter","stepGame","collapsed","winPlayers","winPieces","forEach","size","values","next","Math","min","classicalMovesMaximum","classicalMovesStart","insertColorPiece","next_color_id","colorPieceSecond","insertSecondColorPiece","piecePrimary","insertSpacePiece","columns","worldClone","cloneWorld","newWorld","collapsePiece","pieceOther","emits","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","alert","components","Alert","modal","player","gameWonShowed","GameBoard","GameExplanation","rules","emptyGame","random","exportState","map","exportWorld","exportWinner","JSON","stringify","Array","from","importState","input","parse","piecesSecond","pieceFromMap","importWinner","pieceSecond","prev","location","reload","randomCopyright","names","floor","temp","join","Date","getFullYear","requestAnimationFrame","setTimeout","pop","ex","handler","current","deep","Game","Menu","app","mount","updated","offerReload"],"mappings":"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","file":"js/app.6262663d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/q4/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Menu.vue?vue&type=style&index=0&id=170a0176&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameBoard.vue?vue&type=style&index=0&id=b02400c2&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/screenshot_board_4_super_color.056426e5.png\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=37701884&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Game.vue?vue&type=style&index=0&id=1f0af273&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"media/NeinNeinNein_large.b83a159f.webm\";","module.exports = __webpack_public_path__ + \"img/screenshot_board_2_super_pos_tooltip.63b52465.png\";","module.exports = __webpack_public_path__ + \"img/Title.3daac747.svg\";","module.exports = __webpack_public_path__ + \"img/screenshot_board_5_super_color_collapsed.b6f3fa8d.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Alert.vue?vue&type=style&index=0&id=02987c69&scoped=true&lang=scss\"","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"p\", null, \"There is a new version available. Do you want to restart?\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Menu = _resolveComponent(\"Menu\")!\n  const _component_Game = _resolveComponent(\"Game\")!\n  const _component_Alert = _resolveComponent(\"Alert\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (_ctx.inMenu)\n      ? (_openBlock(), _createBlock(_component_Menu, {\n          key: 0,\n          onStartGame: _ctx.startGame,\n          onBackGame: _ctx.backGame\n        }, null, 8, [\"onStartGame\", \"onBackGame\"]))\n      : _createCommentVNode(\"\", true),\n    (!_ctx.inMenu)\n      ? (_openBlock(), _createBlock(_component_Game, {\n          key: 1,\n          state: _ctx.state,\n          onToMenu: _cache[0] || (_cache[0] = ($event: any) => (_ctx.inMenu = true))\n        }, null, 8, [\"state\"]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"footer\", null, [\n      _createElementVNode(\"p\", null, [\n        _createTextVNode(\" © \" + _toDisplayString(_ctx.copyright) + \" \", 1),\n        (_ctx.stateStack.length > 1)\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 0,\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.undo())),\n              \"aria-label\": \"Undo\",\n              title: \"Undo\"\n            }, \" ⭯ \"))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _createVNode(_component_Alert, {\n      title: \"New Version Available\",\n      ref: \"offer\"\n    }, {\n      default: _withCtx(() => [\n        _hoisted_1,\n        _createElementVNode(\"button\", {\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.reloadNow()))\n        }, \"Reload with new version\"),\n        _createElementVNode(\"button\", {\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.$refs.offer.showModal = false))\n        }, \"Continue\")\n      ]),\n      _: 1\n    }, 512)\n  ], 64))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '@/assets/Title.svg'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-02987c69\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"wrapper\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", { \"aria-label\": \"Close\" }, \"×\", -1))\nconst _hoisted_3 = { class: \"content\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  height: \"111\",\n  width: \"320\",\n  alt: \"q4 Logo\"\n}, null, -1))\nconst _hoisted_5 = { key: 0 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createBlock(_Transition, {\n    name: \"modal\",\n    onAfterEnter: _ctx.afterFadeIn,\n    onBeforeLeave: _ctx.beforeFadeOut\n  }, {\n    default: _withCtx(() => [\n      (_ctx.showModal)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"container\",\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.clickBackground && _ctx.clickBackground(...args)))\n          }, [\n            _createElementVNode(\"div\", _hoisted_1, [\n              _createElementVNode(\"h2\", {\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.showModal = false))\n              }, [\n                _createElementVNode(\"span\", null, _toDisplayString(_ctx.title), 1),\n                _hoisted_2\n              ]),\n              _createElementVNode(\"div\", _hoisted_3, [\n                _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                  _hoisted_4\n                ], true),\n                (_ctx.message)\n                  ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString(_ctx.message), 1))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 3\n  }, 8, [\"onAfterEnter\", \"onBeforeLeave\"]))\n}","\nimport { Options, Vue } from \"vue-class-component\";\n\n@Options({\n  props: {\n    title: String,\n    message: String,\n    shouldOpen: Boolean,\n  },\n  data() {\n    return {\n      showModal: this.shouldOpen,\n      showDone: false,\n    };\n  },\n  watch: {\n    shouldOpen() {\n      this.showModal = this.shouldOpen;\n    },\n  },\n})\nexport default class Alert extends Vue {\n  title!: String;\n  message!: String;\n  shouldOpen!: Boolean;\n  showModal!: Boolean;\n  showDone!: Boolean;\n  private keyboardEL: any;\n\n  clickBackground(event: PointerEvent) {\n    if (this.showDone && event.target === event.currentTarget) {\n      this.showModal = false;\n    }\n  }\n\n  afterFadeIn() {\n    this.showDone = true;\n    this.keyboardEL = document.addEventListener(\"keyup\", (event) => {\n      if (event.key === \"Escape\") {\n        this.showModal = false;\n      }\n    });\n  }\n  beforeFadeOut() {\n    this.showDone = false;\n    document.removeEventListener(\"keyup\", this.keyboardEL);\n    this.keyboardEL = undefined;\n  }\n}\n","import { render } from \"./Alert.vue?vue&type=template&id=02987c69&scoped=true&ts=true\"\nimport script from \"./Alert.vue?vue&type=script&lang=ts\"\nexport * from \"./Alert.vue?vue&type=script&lang=ts\"\n\nimport \"./Alert.vue?vue&type=style&index=0&id=02987c69&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02987c69\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '@/assets/Title.svg'\nimport _imports_1 from '@/assets/NeinNeinNein_large.webm'\nimport _imports_2 from '@/assets/NeinNeinNein_small.webm'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1f0af273\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"classicalMoves\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"strong\", null, \"remaining classical moves:\", -1))\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"  \")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\" — \")\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"source\", {\n  src: _imports_1,\n  type: \"video/webm\",\n  media: \"(-webkit-min-device-pixel-ratio: 2)\"\n}, null, -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"source\", {\n  src: _imports_2,\n  type: \"video/webm\"\n}, null, -1))\nconst _hoisted_7 = [\n  _hoisted_5,\n  _hoisted_6\n]\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Specials Game Rules\", -1))\nconst _hoisted_9 = { key: 0 }\nconst _hoisted_10 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_GameBoard = _resolveComponent(\"GameBoard\")!\n  const _component_Alert = _resolveComponent(\"Alert\")!\n  const _component_GameExplanation = _resolveComponent(\"GameExplanation\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"header\", null, [\n      _createElementVNode(\"img\", {\n        src: _imports_0,\n        height: \"50\",\n        width: \"144\",\n        alt: \"q4 Logo\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('toMenu'))),\n        \"aria-label\": \"Go to menu\"\n      }),\n      _createElementVNode(\"h1\", {\n        class: _normalizeClass({ player1: _ctx.state.next_player })\n      }, \" Next player: \" + _toDisplayString(_ctx.getCurrentPlayerColor(_ctx.state.next_player)), 3),\n      _createElementVNode(\"button\", {\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$refs.expl.open()))\n      }, \"Help\")\n    ]),\n    _createElementVNode(\"main\", null, [\n      _createVNode(_component_GameBoard, {\n        state: _ctx.state,\n        onPlaceClassical: _ctx.placeClassical,\n        onPlaceSpace: _ctx.placeSpace,\n        onPlaceColor: _ctx.placeColor,\n        onManualCollapse: _ctx.manualCollapse\n      }, null, 8, [\"state\", \"onPlaceClassical\", \"onPlaceSpace\", \"onPlaceColor\", \"onManualCollapse\"]),\n      (_ctx.state.collapsesBeforeMove < Infinity)\n        ? (_openBlock(), _createElementBlock(\"p\", {\n            key: 0,\n            class: _normalizeClass({ outOfMoves: _ctx.state.playerAllowedCollapses === 0 })\n          }, \" You have performed \" + _toDisplayString(_ctx.state.playerAllowedCollapses) + \" out of \" + _toDisplayString(_ctx.state.collapsesBeforeMove) + \" allowed collapses before your move. \", 3))\n        : _createCommentVNode(\"\", true),\n      _createElementVNode(\"p\", _hoisted_1, [\n        _hoisted_2,\n        _hoisted_3,\n        _createElementVNode(\"span\", {\n          class: _normalizeClass({ low: _ctx.state.playerDoubleAllowedClassical[0] <= 2 }),\n          style: {\"color\":\"red\"}\n        }, \"red: \" + _toDisplayString(_ctx.state.playerDoubleAllowedClassical[0] / 2), 3),\n        _hoisted_4,\n        _createElementVNode(\"span\", {\n          class: _normalizeClass({ low: _ctx.state.playerDoubleAllowedClassical[1] <= 2 }),\n          style: {\"color\":\"blue\"}\n        }, \"blue: \" + _toDisplayString(_ctx.state.playerDoubleAllowedClassical[1] / 2), 3)\n      ])\n    ]),\n    _createVNode(_component_Alert, {\n      title: \"Illegal move!\",\n      message: \"That move is illegal! It cannot be completed in any of the possible world states.\",\n      ref: \"modal\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"video\", {\n          autoplay: \"\",\n          preload: \"\",\n          width: \"320\",\n          height: \"431\",\n          ref: \"video\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.$refs.video.play())),\n          style: {\"cursor\":\"pointer\"}\n        }, _hoisted_7, 512)\n      ]),\n      _: 1\n    }, 512),\n    _createVNode(_component_Alert, {\n      title: \"Game Won!\",\n      message: \n      'Player ' +\n      _ctx.getCurrentPlayerColor(_ctx.state.winner?.player1) +\n      ' has won in all possible states of the game!'\n    ,\n      shouldOpen: _ctx.state.winner !== undefined\n    }, null, 8, [\"message\", \"shouldOpen\"]),\n    _createVNode(_component_GameExplanation, { ref: \"expl\" }, {\n      default: _withCtx(() => [\n        (_ctx.state.collapsingIsMove || _ctx.state.collapsesBeforeMove < Infinity)\n          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n              _hoisted_8,\n              (_ctx.state.collapsingIsMove)\n                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \" Collapsing a piece counts as a players move. \"))\n                : _createCommentVNode(\"\", true),\n              (_ctx.state.collapsesBeforeMove < Infinity)\n                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, \" Each player is allowed to perform \" + _toDisplayString(_ctx.state.collapsesBeforeMove) + \" collapses before performing their move. \", 1))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    }, 512)\n  ], 64))\n}","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b02400c2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"controls\" }\nconst _hoisted_2 = [\"onClick\"]\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = [\"set\"]\nconst _hoisted_7 = [\"onClick\", \"onMouseover\", \"title\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"table\", {\n    class: _normalizeClass({\n      mayCollapse: _ctx.state.playerAllowedCollapses >= 1,\n      player1: _ctx.state.next_player,\n    })\n  }, [\n    _createElementVNode(\"tr\", _hoisted_1, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.state.width, (column) => {\n        return (_openBlock(), _createElementBlock(\"th\", { key: column }, [\n          _createElementVNode(\"button\", {\n            onClick: ($event: any) => (_ctx.placeColor(column)),\n            class: \"color\"\n          }, \"Color\", 8, _hoisted_2),\n          (!_ctx.state.colorPiece)\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                _createElementVNode(\"button\", {\n                  onClick: ($event: any) => (_ctx.placeClassical(column)),\n                  class: \"classic\"\n                }, \" Classic \", 8, _hoisted_3),\n                (_ctx.preparedColumn === undefined)\n                  ? (_openBlock(), _createElementBlock(\"button\", {\n                      key: 0,\n                      onClick: ($event: any) => (_ctx.prepare(column)),\n                      class: \"space\"\n                    }, \" Space 1st \", 8, _hoisted_4))\n                  : (_ctx.preparedColumn != column)\n                    ? (_openBlock(), _createElementBlock(\"button\", {\n                        key: 1,\n                        onClick: ($event: any) => (_ctx.placeSpace(column)),\n                        class: \"space\"\n                      }, \" Space 2nd \", 8, _hoisted_5))\n                    : (_openBlock(), _createElementBlock(\"button\", {\n                        key: 2,\n                        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.preparedColumn = undefined)),\n                        class: \"reset\"\n                      }, \" Reset \"))\n              ], 64))\n            : _createCommentVNode(\"\", true)\n        ]))\n      }), 128))\n    ]),\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.state.height, (row) => {\n      return (_openBlock(), _createElementBlock(\"tr\", { key: row }, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.state.width, (column) => {\n          return (_openBlock(), _createElementBlock(\"td\", {\n            key: column,\n            set: (_ctx.col = _ctx.state.occupancyCache[column]?.[row]),\n            class: _normalizeClass({ empty: _ctx.col === undefined })\n          }, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.col, (piece) => {\n              return (_openBlock(), _createBlock(_Transition, {\n                key: piece.id,\n                name: \"slide\",\n                appear: \"\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", {\n                    class: _normalizeClass({\n                small: !piece.stable,\n                player1:\n                  // no color superposition ~> use piece player\n                  (piece.player1 && piece.colorPieceOther === undefined) ||\n                  // color superposition and one of the options is hovered\n                  (piece.colorPieceOther !== undefined &&\n                    piece.colorID === _ctx.highlight?.piece?.colorID &&\n                    // then highlight hovered piece in next player color\n                    !((piece === _ctx.highlight.piece) ^ _ctx.state.next_player)),\n                color:\n                  piece.colorID !== undefined &&\n                  // no highlighting when 2nd piece missing (i.e. when colorPieceOther = undefined)\n                  (piece.colorPieceOther === undefined ||\n                    piece.colorID !== _ctx.highlight?.piece?.colorID),\n                highlight:\n                  // non-color non-stable is highlighted ~> highlight pieces in resulting remaining worlds\n                  !piece.stable &&\n                  _ctx.highlightOccupancy[column]?.[row]?.has(piece),\n                highlightColor:\n                  // part of highlighted color superposition piece\n                  piece.colorPieceOther !== undefined &&\n                  piece.colorID === _ctx.highlight?.piece?.colorID,\n                winning: _ctx.state.winner?.pieces?.has(piece),\n              }),\n                    onClick: ($event: any) => (_ctx.collapse(column, row, piece)),\n                    onMouseover: ($event: any) => (\n                _ctx.highlight = { column: column, row: row, piece: piece }\n              ),\n                    onMouseleave: _cache[1] || (_cache[1] = ($event: any) => (_ctx.highlight = undefined)),\n                    title: _ctx.getPieceActionHint(piece) + _ctx.getActionPieceDebug(piece)\n                  }, _toDisplayString(piece.id), 43, _hoisted_7)\n                ]),\n                _: 2\n              }, 1024))\n            }), 128))\n          ], 10, _hoisted_6))\n        }), 128))\n      ]))\n    }), 128))\n  ], 2))\n}","import { World, Piece, Winner } from \"./GameState\";\n\n/**\n * Inserts $piece into $world at column $column\n * Computes the new world winner, if not already won\n *\n * Returns true iff the world was mutated\n * ~> returns false iff the move is illegal\n */\nexport function insertPiece(height: number, world: World<Winner,Piece>, column: number, piece: Piece): boolean {\n    if (column in world.data) {\n        let row = height\n        while (row >= 1) {\n            if (row in world.data[column]) {\n                row--\n            } else {\n                world.data[column][row] = piece\n                return true\n            }\n        }\n\n        // column is full\n        return false\n    }\n\n    // column is empty so far\n    world.data[column] = {}\n    world.data[column][height] = piece\n    return true\n}\n\nconst WIN_LENGTH = 4;\nexport function computeWinner(height: number, width: number, world: World<Winner,Piece>, onlyStable: boolean = true) {\n    // columns\n    for (let column = 1; column <= width; column++) {\n        const winner = checkWinnerDirection(height, width, world,\n            1, column, 1, 0, onlyStable);\n        if (winner !== undefined) {\n            return winner;\n        }\n\n        // diagonals: sufficient to check diagonals going right\n        for (let row = 1; row <= height - WIN_LENGTH; row++) {\n            // check diagonal going to top right\n            const winnerTop = checkWinnerDirection(height, width, world,\n                row, column, 1, -1, onlyStable);\n            if (winnerTop !== undefined) {\n                return winnerTop;\n            }\n\n            // check diagonal going to bottom right\n            const winnerBottom = checkWinnerDirection(height, width, world,\n                row, column, 1, 1, onlyStable);\n            if (winnerBottom !== undefined) {\n                return winnerBottom;\n            }\n        }\n    }\n\n    // rows\n    for (let row = 1; row <= height; row++) {\n        const winner = checkWinnerDirection(height, width, world,\n            row, 1, 0, 1);\n        if (winner !== undefined) {\n            return winner;\n        }\n    }\n}\n\n/**\n * Checks for a winner in direction (rowD, columnD) starting from (row, column)\n * Return player1 as bool or undefined\n */\nfunction checkWinnerDirection(height: number, width: number,\n    world: World<Winner,Piece>, row: number, column: number,\n    rowD: number, columnD: number, onlyStable: boolean = true): Winner | undefined {\n    let count = 0\n    let player1 = undefined\n\n    while (row <= height && column <= width) {\n        const piece = world.data[column]?.[row]\n        if (piece === undefined || piece.colorID !== undefined || (onlyStable && !piece.stable)) {\n            // always ignore color pieces\n            // only use stable cells if specified\n            count = 0\n            player1 = undefined\n        } else {\n            const nextPlayer1 = piece?.player1\n            if (nextPlayer1 !== player1) {\n                count = 1\n                player1 = nextPlayer1\n            } else if (++count >= WIN_LENGTH) {\n                // game is won\n                const winner: Winner = {\n                    player1: player1,\n                    pieces: new Set()\n                }\n\n                // collect the winning pieces\n                winner.pieces.add(piece)\n                for (let i = 1; i < WIN_LENGTH; i++) {\n                    row -= rowD\n                    column -= columnD\n                    winner.pieces.add(world.data[column]?.[row])\n                }\n\n                return winner\n            }\n        }\n\n        // step into direction (rowD, columnD)\n        row += rowD\n        column += columnD\n    }\n\n    return undefined\n}\n","import { GameState, Piece, WorldStack } from \"./GameState\";\n\nexport function playerToColor(player_red: boolean): string {\n    return player_red ? \"Red\" : \"Blue\"\n}\n\n/**\n * Groups the pieces by the position they occur in some world.\n * Computes / updates all piece stability\n */\nexport function computeWorldOccupation(state: GameState): WorldStack<WorldStack<Set<Piece>>> {\n    // for each cell collect the pieces that occur there\n    const res: WorldStack<WorldStack<Set<Piece>>> = {};\n\n    // detect if a piece occures at multiple positions accross worlds\n    const piecePos = new Map<Piece, { row: string; column: string }>();\n\n    for (const world of state.worlds) {\n        for (const column in world.data) {\n            if (!(column in res)) {\n                res[column] = {};\n            }\n\n            for (const row in world.data[column]) {\n                if (!(row in res[column])) {\n                    res[column][row] = new Set();\n                }\n\n                // piece has occured at (column, row)\n                const piece = world.data[column][row];\n                res[column][row].add(piece);\n\n                // check if piece occured at a different position\n                // TODO: this (view update) code mutates the (global) state\n                const pos = piecePos.get(piece);\n                if (pos === undefined) {\n                    // piece has not been seen yet\n                    piecePos.set(piece, { row: row, column: column });\n                    piece.stable = true;\n                } else if (pos.row != row || pos.column != column) {\n                    // piece detected at different position\n                    piece.stable = false;\n                }\n            }\n        }\n    }\n\n    return res\n}\n\n/**\n * Groups the pieces by the position they occur in some world.\n * Only considers worlds where targetPiece occurs in (targetColumn, targetRow)\n */\nexport function computeWorldOccupationFilter(state: GameState, targetColumn: number, targetRow: number, targetPiece: Piece): WorldStack<WorldStack<Set<Piece>>> {\n    // for each cell collect the pieces that occur there\n    const res: WorldStack<WorldStack<Set<Piece>>> = {};\n    for (const world of state.worlds) {\n        // validate the world\n        if (world.data[targetColumn]?.[targetRow] !== targetPiece) {\n            continue\n        }\n\n        // proceede as in above function\n        for (const column in world.data) {\n            if (!(column in res)) {\n                res[column] = {};\n            }\n\n            for (const row in world.data[column]) {\n                if (!(row in res[column])) {\n                    res[column][row] = new Set();\n                }\n\n                // piece has occured at (column, row)\n                const piece = world.data[column][row];\n                res[column][row].add(piece);\n            }\n        }\n    }\n\n    return res\n}","import { computeWinner, insertPiece } from \"./ClassicGame\";\nimport { GameState, Piece, Winner, World } from \"./GameState\";\nimport { computeWorldOccupation } from \"./GameVisual\";\n\nfunction nextPiece(state: GameState): Piece {\n    return {\n        id: state.next_stone_id,\n        player1: state.next_player,\n        stable: true\n    }\n}\n\nexport function isSuperposColorPiece(p: Piece): boolean {\n    return p.colorID !== undefined\n}\n\n// Color pieces are two pieces inserted at different positions\n// Returns true iff both pieces are already inserted on the board\nexport function isFullySetSuperposColorPiece(p: Piece): boolean {\n    return p.colorID !== undefined && p.colorPieceOther !== undefined\n}\n\n\n// return true iff insertion is okay\nexport function insertClassicPiece(state: GameState, column: number): boolean {\n    // you loose one classical piece\n    // but stepGame always increases it by one\n    const playerIndex = state.next_player ? 0 : 1\n    state.playerDoubleAllowedClassical[playerIndex] -= 3\n\n    if (internalPieceInsert(state, column, nextPiece(state))) {\n        return true\n    }\n\n    // revert\n    state.playerDoubleAllowedClassical[playerIndex] += 3\n    return false\n}\n\nfunction internalPieceInsert(state: GameState, column: number, piece: Piece) {\n    // insert piece mutates the world iff it returns true\n    // thus any mutation implies newWorlds.length > 0\n    // ~> no need to copy the world\n    const newWorlds = state.worlds.filter(world => insertPiece(state.height, world, column, piece));\n\n    // reject if no world remains\n    if (newWorlds.length === 0) {\n        return false\n    }\n\n    // step game forward and accept move\n    state.worlds = newWorlds;\n    state.next_stone_id++;\n    state.next_player = !state.next_player;\n    stepGame(state)\n    return true;\n}\n\n/**\n * Steps the game forward\n * This needs to be called after every change to the worlds!\n */\nfunction stepGame(state: GameState, collapsed: boolean = false) {\n    // update occupancy and piece stability\n    state.occupancyCache = computeWorldOccupation(state)\n\n    // winner calculation\n    if (state.winner === undefined) {\n        // compute winner in all worlds and collect winning pieces\n        const winPlayers = new Set<boolean>();\n        const winPieces = new Set<Piece>()\n        for (const world of state.worlds) {\n            if (world.winner === undefined) {\n                world.winner = computeWinner(state.height, state.width, world)\n            }\n\n            if (world.winner !== undefined) {\n                winPlayers.add(world.winner.player1);\n                world.winner.pieces.forEach(piece => winPieces.add(piece));\n            }\n        }\n\n        // worlds won by a single player\n        if (winPlayers.size === 1) {\n            state.winner = {\n                player1: winPlayers.values().next().value,\n                pieces: winPieces\n            }\n        }\n    }\n\n    // apply game rules\n    if (collapsed) {\n        state.playerAllowedCollapses--\n        if (state.collapsingIsMove) {\n            state.next_player = !state.next_player\n        }\n    } else { // performed a move\n        const playerIndex = state.next_player ? 1 : 0\n        state.playerDoubleAllowedClassical[playerIndex] =\n            Math.min(state.playerDoubleAllowedClassical[playerIndex] + 1, 2 * state.classicalMovesMaximum)\n        state.playerAllowedCollapses = state.collapsesBeforeMove\n\n        // you get another turn if the other player has no classical moves left\n        if (state.playerDoubleAllowedClassical[1 - playerIndex] <= 1) {\n            state.playerDoubleAllowedClassical[1 - playerIndex] += 2 * state.classicalMovesStart\n            state.next_player = !state.next_player\n        }\n    }\n}\n\n\nexport function insertColorPiece(state: GameState, column: number): Piece | undefined {\n    const piece = nextPiece(state)\n    piece.colorID = state.next_color_id\n    piece.colorPieceSecond = false\n    if (internalPieceInsert(state, column, piece)) {\n        state.next_color_id++\n        return piece\n    }\n\n    return undefined\n}\n\nexport function insertSecondColorPiece(state: GameState, column: number, piecePrimary: Piece): boolean {\n    // TODO: use the same id?\n    const piece: Piece = {\n        id: piecePrimary.id,\n        player1: piecePrimary.player1,\n        stable: piecePrimary.stable,\n        colorID: piecePrimary.colorID,\n        colorPieceSecond: true,\n        colorPieceOther: piecePrimary\n    }\n\n    if (internalPieceInsert(state, column, piece)) {\n        piecePrimary.colorPieceOther = piece\n        return true\n    }\n\n    return false\n}\n\n// insert piece: superposition in location\nexport function insertSpacePiece(state: GameState, columns: number[]): boolean {\n    const piece = nextPiece(state)\n\n    // try to insert new space-piece\n    const newWorlds = [] as World<Winner,Piece>[]\n    for (const world of state.worlds) {\n        // iterate over the insertion columns\n        for (const column of columns) {\n            const worldClone = cloneWorld(world);\n            if (insertPiece(state.height, worldClone, column, piece)) {\n                newWorlds.push(worldClone)\n            }\n        }\n    }\n\n    // reject if no world remains\n    if (newWorlds.length === 0) {\n        return false\n    }\n\n    // step game forward and accept move\n    state.worlds = newWorlds\n    state.next_stone_id++\n    state.next_player = !state.next_player\n    stepGame(state)\n    return true\n}\n\nfunction cloneWorld<W,T>(world: World<W,T>): World<W,T> {\n    const newWorld = {\n        data: {},\n        winner: world.winner\n    } as World<W,T>;\n    for (const column in world.data) {\n        newWorld.data[column] = {};\n        for (const row in world.data[column]) {\n            newWorld.data[column][row] = world.data[column][row];\n        }\n    }\n\n    return newWorld\n}\n\n\n/**\n * Only keep worlds where piece is in (column, row)\n */\nexport function collapsePiece(state: GameState, column: number, row: number, piece: Piece) {\n    if (piece.colorPieceOther === undefined) {\n        state.worlds = state.worlds.filter(world => {\n            return world.data[column]?.[row] === piece\n        });\n    } else {\n        // piece is in color superposition\n        const pieceOther = piece.colorPieceOther;\n\n        // mark the clicked piece as belonging to the player\n        piece.colorID = undefined;\n        piece.colorPieceOther = undefined;\n        piece.player1 = state.next_player;\n\n        // mark the other piece as belonging to the opponent\n        pieceOther.colorID = undefined;\n        pieceOther.colorPieceOther = undefined;\n        pieceOther.id++;\n        pieceOther.player1 = !state.next_player;\n    }\n\n    // update occupancy cache and piece stability\n    stepGame(state, true)\n}\n","\nimport { Options, Vue } from \"vue-class-component\";\nimport {\n  isSuperposColorPiece,\n  isFullySetSuperposColorPiece,\n} from \"@/GameLogic\";\nimport { GameState, Piece } from \"@/GameState\";\nimport { computeWorldOccupationFilter, playerToColor } from \"@/GameVisual\";\n\ninterface Highlight {\n  column: number;\n  row: number;\n  piece: Piece;\n}\n@Options({\n  props: {\n    state: Object,\n  },\n  data() {\n    return {\n      preparedColumn: undefined,\n      highlight: undefined,\n    };\n  },\n  emits: [\"placeClassical\", \"placeSpace\", \"placeColor\", \"manualCollapse\"],\n})\nexport default class GameBoard extends Vue {\n  state!: GameState;\n  preparedColumn?: number;\n  highlight?: Highlight;\n\n  getPieceActionHint(p: Piece): string {\n    if (isSuperposColorPiece(p)) {\n      if (isFullySetSuperposColorPiece(p)) {\n        return this.state.playerAllowedCollapses >= 1\n          ? \"Click this to collapse it to \" +\n              playerToColor(this.state.next_player)\n          : \"You have no collapses left before your move.\";\n      } else {\n        return \"You need to choose a position for the other piece first\";\n      }\n    } else if (!p.stable) {\n      return this.state.playerAllowedCollapses >= 1\n        ? \"Click to collapse here\"\n        : \"You have no collapses left before your move.\";\n    }\n\n    return \"\";\n  }\n\n  getActionPieceDebug(piece: Piece): string {\n    return process.env.NODE_ENV === \"production\"\n      ? \"\"\n      : `\nID: ${piece.id}\nplayer: ${piece.player1} ${playerToColor(piece.player1)}\nstable: ${piece.stable}\ncolorID: ${piece.colorID}\ncolorORef: ${piece.colorPieceOther}\nallowedCollapses: ${this.state.playerAllowedCollapses}`;\n  }\n\n  prepare(column: number) {\n    this.preparedColumn = column;\n  }\n  placeClassical(column: number) {\n    this.$emit(\"placeClassical\", column);\n    this.preparedColumn = undefined;\n  }\n  placeColor(column: number) {\n    this.$emit(\"placeColor\", column);\n    this.preparedColumn = undefined;\n  }\n  placeSpace(column: number) {\n    this.$emit(\"placeSpace\", this.preparedColumn, column);\n    this.preparedColumn = undefined;\n  }\n\n  collapse(column: number, row: number, piece: Piece) {\n    // reject\n    if (this.state.playerAllowedCollapses < 1) {\n      return;\n    }\n\n    // only keep worlds where piece is in (column, row)\n    // ignore events, where the piece is already stable\n    if (!piece.stable || piece.colorPieceOther !== undefined) {\n      this.$emit(\"manualCollapse\", column, row, piece);\n      this.highlight = undefined;\n    }\n  }\n\n  get highlightOccupancy() {\n    // no highlight occupation for color superposition or stable pieces\n    return this.highlight === undefined ||\n      this.highlight.piece.stable ||\n      this.highlight.piece.colorID !== undefined\n      ? {}\n      : computeWorldOccupationFilter(\n          this.state,\n          this.highlight.column,\n          this.highlight.row,\n          this.highlight.piece\n        );\n  }\n}\n","import { render } from \"./GameBoard.vue?vue&type=template&id=b02400c2&scoped=true&ts=true\"\nimport script from \"./GameBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./GameBoard.vue?vue&type=script&lang=ts\"\n\nimport \"./GameBoard.vue?vue&type=style&index=0&id=b02400c2&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b02400c2\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '@/assets/screenshot_board_1_super_pos.png'\nimport _imports_1 from '@/assets/screenshot_board_2_super_pos_tooltip.png'\nimport _imports_2 from '@/assets/screenshot_board_3_super_pos_collapsed.png'\nimport _imports_3 from '@/assets/screenshot_board_4_super_color.png'\nimport _imports_4 from '@/assets/screenshot_board_5_super_color_collapsed.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0d3bf39c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Example Gameplay\", -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" First, its Blue's turn: Blue inserts the \\\"1\\\" piece at a superposition of two columns. Then, Red also inserts a space-superpositioned piece in the middle column and the leftmost nonempty column. Both pieces are now entangled: if the \\\"1\\\" piece is in the middle, the \\\"2\\\" must be either on top or in the column to the left. \", -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_0 }, null, -1))\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { style: {\"font-weight\":\"bold\"} }, \" As in classical Connect Four, only a single classical piece can occupy a cell. \", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" In order to collapse a quantum piece to a classical one, you can click on it. The yellow effect on mouse-over highlights the pieces unaffected by a collapsing the hovered piece: \", -1))\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_1 }, null, -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" As it's Blue's turn again, Blue can decide to do exactly this in order to decide where the \\\"1\\\" piece is finally placed: \", -1))\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_2 }, null, -1))\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" Depending on the selected game mode, this is may complete the move of player Blue. \", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" Now, suppose that it's Red's turn. Red inserts a color-superpositioned piece in the middle column. Since the location of the \\\"2\\\" piece is still undecided, this color piece may end up at different positions. Again, this is indicated in the GUI by the small \\\"3\\\" pieces in the middle column. \", -1))\nconst _hoisted_11 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" The big \\\"3\\\" piece in the column to the right is placed by the blue player. The location of this piece is well-known and constant, just its color is still uncertain. \", -1))\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_3 }, null, -1))\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \" Since its Red's turn again, Red decides to collapse the color-superpositioned piece by clicking on one of the \\\"3\\\" pieces in the middle column. This turns them both red (but doesn't affect their superposition in space). The other part of the \\\"3\\\" piece on the right becomes a blue \\\"4\\\" piece: \", -1))\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_4 }, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Alert = _resolveComponent(\"Alert\")!\n\n  return (_openBlock(), _createBlock(_component_Alert, {\n    title: \"Game Rules\",\n    message: \"\",\n    ref: \"alert\"\n  }, {\n    default: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"default\", {}, undefined, true),\n      _hoisted_1,\n      _hoisted_2,\n      _hoisted_3,\n      _hoisted_4,\n      _hoisted_5,\n      _hoisted_6,\n      _hoisted_7,\n      _hoisted_8,\n      _hoisted_9,\n      _hoisted_10,\n      _hoisted_11,\n      _hoisted_12,\n      _hoisted_13,\n      _hoisted_14\n    ]),\n    _: 3\n  }, 512))\n}","\nimport { Options, Vue } from \"vue-class-component\";\nimport Alert from \"./Alert.vue\";\n\n@Options({\n  components: {\n    Alert,\n  },\n})\nexport default class GameExplanation extends Vue {\n  open() {\n    (this.$refs.alert as Alert).showModal = true;\n  }\n}\n","import { render } from \"./GameExplanation.vue?vue&type=template&id=0d3bf39c&scoped=true&ts=true\"\nimport script from \"./GameExplanation.vue?vue&type=script&lang=ts\"\nexport * from \"./GameExplanation.vue?vue&type=script&lang=ts\"\n\nimport \"./GameExplanation.vue?vue&type=style&index=0&id=0d3bf39c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0d3bf39c\"]])\n\nexport default __exports__","\nimport { Options, Vue } from \"vue-class-component\";\nimport Alert from \"@/components/Alert.vue\";\nimport GameBoard from \"@/components/GameBoard.vue\";\nimport GameExplanation from \"@/components/GameExplanation.vue\";\nimport { GameState, Piece } from \"@/GameState\";\nimport { playerToColor } from \"@/GameVisual\";\nimport {\n  collapsePiece,\n  insertClassicPiece,\n  insertColorPiece,\n  insertSecondColorPiece,\n  insertSpacePiece,\n} from \"@/GameLogic\";\n\n@Options({\n  props: {\n    state: Object,\n  },\n  data() {\n    return {\n      gameWonShowed: false,\n    };\n  },\n  emits: [\"toMenu\"],\n  components: {\n    Alert,\n    GameBoard,\n    GameExplanation,\n  },\n})\nexport default class Game extends Vue {\n  state!: GameState;\n  private gameWonShowed!: boolean;\n\n  placeClassical(column: number) {\n    if (!insertClassicPiece(this.state, column)) {\n      (this.$refs.modal as Alert).showModal = true;\n    }\n  }\n  placeColor(column: number) {\n    if (this.state.colorPiece === undefined) {\n      // first color piece\n      this.state.colorPiece = insertColorPiece(this.state, column);\n      if (this.state.colorPiece === undefined) {\n        // illegal move\n        (this.$refs.modal as Alert).showModal = true;\n      }\n    } else {\n      // second color piece\n      if (insertSecondColorPiece(this.state, column, this.state.colorPiece)) {\n        this.state.colorPiece = undefined;\n      } else {\n        (this.$refs.modal as Alert).showModal = true;\n      }\n    }\n  }\n  placeSpace(...columns: number[]) {\n    if (!insertSpacePiece(this.state, columns)) {\n      (this.$refs.modal as Alert).showModal = true;\n    }\n  }\n\n  manualCollapse(column: number, row: number, piece: Piece) {\n    collapsePiece(this.state, column, row, piece);\n  }\n\n  getCurrentPlayerColor(player: boolean) {\n    return playerToColor(player);\n  }\n}\n","import { render } from \"./Game.vue?vue&type=template&id=1f0af273&scoped=true&ts=true\"\nimport script from \"./Game.vue?vue&type=script&lang=ts\"\nexport * from \"./Game.vue?vue&type=script&lang=ts\"\n\nimport \"./Game.vue?vue&type=style&index=0&id=1f0af273&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1f0af273\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, resolveComponent as _resolveComponent, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '@/assets/Title.svg'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-170a0176\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Collapse as Move\", -1))\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Collapsing a piece or color is your move!\", -1))\nconst _hoisted_3 = [\n  _hoisted_1,\n  _hoisted_2\n]\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Single Collapse\", -1))\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"You may perform a single collapse before making your move.\", -1))\nconst _hoisted_6 = [\n  _hoisted_4,\n  _hoisted_5\n]\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"All Quantum\", -1))\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"Allows all quantum moves and arbitrarily many collapses.\", -1))\nconst _hoisted_9 = [\n  _hoisted_7,\n  _hoisted_8\n]\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Show game explanation\", -1))\nconst _hoisted_11 = [\n  _hoisted_10\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_GameExplanation = _resolveComponent(\"GameExplanation\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"header\", null, [\n      _createVNode(_Transition, {\n        name: \"fade\",\n        appear: \"\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"img\", {\n            src: _imports_0,\n            width: \"577\",\n            alt: \"q4 Logo\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('backGame')))\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"main\", null, [\n      _createElementVNode(\"button\", {\n        onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.startGame(true, Infinity)))\n      }, _hoisted_3),\n      _createElementVNode(\"button\", {\n        onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.startGame(false, 1)))\n      }, _hoisted_6),\n      _createElementVNode(\"button\", {\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.startGame(false, Infinity)))\n      }, _hoisted_9),\n      _createElementVNode(\"button\", {\n        onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.$refs.expl.open()))\n      }, _hoisted_11)\n    ]),\n    _createVNode(_component_GameExplanation, { ref: \"expl\" }, null, 512)\n  ], 64))\n}","\nimport { Options, Vue } from \"vue-class-component\";\nimport GameExplanation from \"./GameExplanation.vue\";\nimport { GameRules } from \"@/GameState\";\n\n@Options({\n  emits: [\"startGame\", \"backGame\"],\n  components: {\n    GameExplanation,\n  },\n})\nexport default class Menu extends Vue {\n  startGame(collapsingIsMove: boolean, collapsesBeforeMove: number) {\n    const rules: GameRules = {\n      width: 7,\n      height: 6,\n      collapsingIsMove: collapsingIsMove,\n      collapsesBeforeMove: collapsesBeforeMove,\n      classicalMovesStart: 3,\n      classicalMovesMaximum: 4,\n    };\n    this.$emit(\"startGame\", rules);\n  }\n}\n","import { render } from \"./Menu.vue?vue&type=template&id=170a0176&scoped=true&ts=true\"\nimport script from \"./Menu.vue?vue&type=script&lang=ts\"\nexport * from \"./Menu.vue?vue&type=script&lang=ts\"\n\nimport \"./Menu.vue?vue&type=style&index=0&id=170a0176&scoped=true&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-170a0176\"]])\n\nexport default __exports__","export interface GameRules {\n    // board dimensions\n    width: number,\n    height: number,\n\n    // game rules\n    collapsingIsMove: boolean,\n    collapsesBeforeMove: number,\n    classicalMovesStart: number,\n    classicalMovesMaximum: number,\n}\n\n\nexport interface GameState extends GameRules {\n    // internal/invisible state\n    next_player: boolean, // true iff its the red player's turn. TODO rename to nextPlayerRed\n    next_stone_id: number, // ID of next move to be done by a player\n    next_color_id: number,\n    playerAllowedCollapses: number,\n    playerDoubleAllowedClassical: number[],\n\n    // board state\n    worlds: World<Winner,Piece>[],\n    winner?: Winner,\n\n    // reference to the first color piece if the 2nd has yet to be placed\n    colorPiece?: Piece,\n\n    // cache for board occupancy\n    // for each cell we store the set of pieces that occur there in *any* world\n    occupancyCache: WorldStack<WorldStack<Set<Piece>>>,\n}\n\nexport interface World<W,T> {\n    data: WorldStack<WorldStack<T>>,\n\n    // undefined ~> no winner yet\n    winner?: W,\n}\n\nexport interface WorldStack<T> {\n    [index: number]: T\n}\n\nexport interface Piece {\n    id: number, // id of the move this piece was inserted\n    player1: boolean, // true iff inserted by red player\n\n    // used by ui to mark pieces that are stable/already in the final position\n    stable: boolean,\n\n    // optional for pieces in color-supoerposition\n    colorID?: number,\n    colorPieceSecond?: boolean, // true if this is the first of the two color pieces\n    colorPieceOther?: Piece, // reference to the other piece\n}\n\nexport interface Winner {\n    player1: boolean, // true iff player1 has won\n    pieces: Set<Piece>,\n}\n\n\nexport function emptyGame(rules: GameRules): GameState {\n    return {\n        ...rules,\n\n        next_player: Math.random() < .5,\n        next_stone_id: 1,\n        next_color_id: 1,\n        playerAllowedCollapses: rules.collapsesBeforeMove,\n        playerDoubleAllowedClassical: [2 * rules.classicalMovesStart, 2 * rules.classicalMovesStart],\n\n        worlds: [{\n            data: {}\n        }],\n        occupancyCache: {},\n    }\n}","import { GameRules, GameState, Piece, Winner, World, WorldStack } from \"./GameState\";\nimport { computeWorldOccupation } from \"./GameVisual\";\n\n// see GameState\nexport interface ExportGameState extends GameRules {\n    // internal/invisible state\n    next_player: boolean, // true iff its the red player's turn. TODO rename to nextPlayerRed\n    next_stone_id: number, // ID of next move to be done by a player\n    next_color_id: number,\n    playerAllowedCollapses: number,\n    playerDoubleAllowedClassical: number[],\n\n    // board state\n    worlds: World<ExportWinner, Piece>[],\n    winner?: ExportWinner,\n\n    // reference to the first color piece if the 2nd has yet to be placed\n    colorPiece?: Piece,\n}\n\n// see Winner\ninterface ExportWinner {\n    player1: boolean, // true iff player1 has won\n    pieces: Piece[]\n}\n\nexport function exportState(state: GameState): string {\n    const data: ExportGameState = {\n        ...state,\n        worlds: state.worlds.map(exportWorld),\n        winner: exportWinner(state.winner),\n\n        // @ts-ignore\n        occupancyCache: undefined,\n    };\n\n    return JSON.stringify(data)\n}\n\nfunction exportWorld(world: World<Winner, Piece>): World<ExportWinner, Piece> {\n    const data: WorldStack<WorldStack<Piece>> = {};\n    for (const column in world.data) {\n        data[column] = {}\n\n        for (const row in world.data[column]) {\n            // remove circular references from pieces\n            const piece = world.data[column][row]\n            data[column][row] = { ...piece, colorPieceOther: undefined }\n        }\n    }\n\n    return {\n        winner: exportWinner(world.winner),\n        data: data\n    }\n}\n\nfunction exportWinner(winner?: Winner): ExportWinner | undefined {\n    if (winner !== undefined) {\n        return { player1: winner.player1, pieces: Array.from(winner.pieces) }\n    }\n}\n\n\n\nexport function importState(input: string): GameState | undefined {\n    const state: ExportGameState = JSON.parse(input)\n\n    // restore null to Infinity\n    if (state.collapsesBeforeMove === null) {\n        state.collapsesBeforeMove = Infinity\n    }\n    if (state.playerAllowedCollapses === null) {\n        state.playerAllowedCollapses = Infinity\n    }\n\n    // pieces sharing the id should be unique (stored by reference)\n    // separate all the second color pieces out\n    const pieces = new Map<number, Piece>()\n    const piecesSecond = new Map<number, Piece>()\n    for (const world of state.worlds) {\n        for (const column in world.data) {\n            for (const row in world.data[column]) {\n                // consider $piecesSecond iff piece is a 2nd color piece\n                const piece = world.data[column][row]\n                world.data[column][row] = pieceFromMap(\n                    piece.colorPieceSecond ? piecesSecond : pieces, piece)\n            }\n        }\n\n        // @ts-ignore\n        const newWorld = world as World<Winner, Piece>\n        newWorld.winner = importWinner(pieces, world.winner)\n    }\n\n    // add circular references to color pieces\n    pieces.forEach(piece => {\n        if (piece.colorID !== undefined) {\n            const pieceSecond = piecesSecond.get(piece.id)\n            if (pieceSecond !== undefined) {\n                piece.colorPieceOther = pieceSecond\n                pieceSecond.colorPieceOther = piece\n            }\n        }\n    });\n\n    // analogously restore colorPiece\n    if (state.colorPiece !== undefined) {\n        state.colorPiece = pieces.get(state.colorPiece.id)\n    }\n\n\n    // @ts-ignore\n    const res: GameState = state\n\n    // import winner and update occupancy cache\n    res.winner = importWinner(pieces, state.winner);\n    res.occupancyCache = computeWorldOccupation(res)\n\n    return res\n}\n\n/**\n * Converts piece objects to singletons\n * Returns map[piece.id]\n * If unavailable, then map[piece.id] = piece\n */\nfunction pieceFromMap(map: Map<number, Piece>, piece: Piece): Piece {\n    const prev = map.get(piece.id)\n    if (prev !== undefined) {\n        return prev\n    }\n\n    // store the piece in the map\n    map.set(piece.id, piece)\n    return piece\n}\n\nfunction importWinner(pieces: Map<number, Piece>, winner?: ExportWinner): Winner | undefined {\n    if (winner !== undefined) {\n        return {\n            player1: winner.player1,\n            pieces: new Set(winner.pieces.map(piece => pieces.get(piece.id)!))\n        }\n    }\n}\n","\nimport { Options, Vue } from \"vue-class-component\";\nimport Alert from \"@/components/Alert.vue\";\nimport Game from \"@/components/Game.vue\";\nimport Menu from \"@/components/Menu.vue\";\nimport { emptyGame, GameRules, GameState } from \"./GameState\";\nimport { exportState, importState } from \"./GameStorage\";\n\n@Options({\n  data() {\n    return {\n      inMenu: true,\n      state: undefined,\n      copyright: \"\",\n      stateStack: [],\n    };\n  },\n  watch: {\n    state: {\n      handler(current) {\n        if (current !== undefined) {\n          (this as App).stateStack.push(exportState(current));\n        }\n      },\n      deep: true,\n    },\n  },\n  components: {\n    Alert,\n    Game,\n    Menu,\n  },\n})\nexport default class App extends Vue {\n  private copyright!: string;\n  private inMenu!: boolean;\n  private state?: GameState;\n  private stateStack!: string[];\n\n  startGame(rules: GameRules) {\n    this.inMenu = false;\n    this.state = emptyGame(rules);\n    this.stateStack = [];\n  }\n\n  backGame() {\n    if (this.state !== undefined) {\n      this.inMenu = false;\n    }\n  }\n\n  // called when service worker has updated\n  offerReload() {\n    (this.$refs.offer as Alert).showModal = true;\n  }\n\n  reloadNow() {\n    location.reload();\n  }\n\n  // update copyright every 10s\n  mounted() {\n    this.randomCopyright();\n  }\n\n  randomCopyright() {\n    // shuffle names\n    const names = [\"Magnus Kühn\", \"Robert Junge\", \"Hazem Riahi\"];\n    for (let i = names.length - 1; i > 0; i--) {\n      let j = Math.floor(Math.random() * (i + 1));\n      const temp = names[i];\n      names[i] = names[j];\n      names[j] = temp;\n    }\n\n    this.copyright = names.join(\", \") + \" \" + new Date().getFullYear();\n\n    // update copyright every 10s while tab is active\n    requestAnimationFrame(() =>\n      setTimeout(this.randomCopyright.bind(this), 10000)\n    );\n  }\n\n  undo() {\n    // the current state is on top of the stack\n    this.stateStack.pop();\n\n    // also remove the previous state as it will be readded by the watcher\n    const ex = this.stateStack.pop();\n    if (ex !== undefined) {\n      this.state = importState(ex);\n\n      // go to menu in case of failure\n      this.inMenu = this.state === undefined;\n    }\n  }\n}\n","import { render } from \"./App.vue?vue&type=template&id=37701884&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=37701884&lang=scss\"\n\nimport exportComponent from \"/home/runner/work/q4/q4/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport { register } from 'register-service-worker'\n\nconst app = createApp(App).mount('#app');\n\nif (process.env.NODE_ENV === 'production') {\n    register(`${process.env.BASE_URL}service-worker.js`, {\n        updated() {\n            // app is of type App\n            (app as any).offerReload()\n        }\n    })\n}\n","module.exports = __webpack_public_path__ + \"media/NeinNeinNein_small.5d020185.webm\";","module.exports = __webpack_public_path__ + \"img/screenshot_board_1_super_pos.b5a707db.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GameExplanation.vue?vue&type=style&index=0&id=0d3bf39c&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/screenshot_board_3_super_pos_collapsed.6fa34b90.png\";"],"sourceRoot":""}